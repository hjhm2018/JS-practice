<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reduce Object Example</title>
</head>

<body>

    <script>

        // Reduce objects

        // cart example

        const cart = [
            { title: 'Samsung Galaxy S7', price: 599.99, amount: 1 },
            { title: 'Google Pixel', price: 499.99, amount: 2 },
            { title: 'Xiomi Redmi Note 2', price: 699.99, amount: 4 },
            { title: 'Xiomi Redmi Note 5', price: 399.99, amount: 3 }
        ]

        let { totalItems, cartTotal } = cart.reduce((total, cartItem) => {
            const { amount, price } = cartItem;
            // count items

            total.totalItems += amount;

            // count some
            total.cartTotal += amount * price;
            return total
        }, {
            totalItems: 0,
            cartTotal: 0
        });

        cartTotal = parseFloat(cartTotal.toFixed(2));

        // console.log(total);

        console.log(totalItems);
        console.log(cartTotal);

        // github repos example

        const url = 'https://api.github.com/users/john-smilga/repos?per_page=100';

        const fetchRepos = async () => {
            const response = await fetch(url);

            const data = await response.json();

            // console.log(data);

            const newData = data.reduce((total, repo) => {

                const { language } = repo;

                // if (language) {
                //     if (total[language]) {
                //         total[language] = total[language] + 1;
                //     } else {
                //         total[language] = 1
                //     }
                // }

                if (language) {
                    total[language] = total[language] + 1 || 1
                }

                return total
            }, {

            })

            console.log(newData);
        }

        fetchRepos();



    </script>

</body>

</html>